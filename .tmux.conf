### command prefix
unbind C-b
set-option -g prefix C-a
bind C-a send-prefix

set-window-option -g mode-keys vi
set-option -g default-shell /bin/zsh

# sort sessions by name
bind s choose-tree -sZ -O name

### thx zserge https://zserge.com/posts/tmux/
bind-key -n M-n new-window -c "#{pane_current_path}" -n ""
bind-key -n M-1 select-window -t :1
bind-key -n M-2 select-window -t :2
bind-key -n M-3 select-window -t :3
bind-key -n M-4 select-window -t :4
bind-key -n M-5 select-window -t :5
bind-key -n M-6 select-window -t :6
bind-key -n M-7 select-window -t :7
bind-key -n M-8 select-window -t :8
bind-key -n M-9 select-window -t :9
bind-key -n M-0 select-window -t :0
bind-key -n M-. select-window -n
bind-key -n M-, select-window -p
bind-key -n M-< swap-window -t -1
bind-key -n M-> swap-window -t +1
bind-key -n M-X confirm-before "kill-window"
bind-key -n M-v split-window -h -c "#{pane_current_path}"
bind-key -n M-b split-window -v -c "#{pane_current_path}"
# bind-key -n M-r command-prompt -I "rename-window #W"
bind-key -n M-r command-prompt -I "" "rename-window '%%'"
bind-key -n M-f resize-pane -Z
bind-key -n M-h select-pane -L
bind-key -n M-l select-pane -R
bind-key -n M-k select-pane -U
bind-key -n M-j select-pane -D
bind-key -n M-Left select-pane -L
bind-key -n M-Right select-pane -R
bind-key -n M-Up select-pane -U
bind-key -n M-Down select-pane -D
bind-key -n M-S-Left resize-pane -L 1
bind-key -n M-S-Right resize-pane -R 1
bind-key -n M-S-Up resize-pane -U 1
bind-key -n M-S-Down resize-pane -D 1
bind-key -n M-H run-shell 'old=`tmux display -p "#{pane_index}"`; tmux select-pane -L; tmux swap-pane -t $old'
bind-key -n M-J run-shell 'old=`tmux display -p "#{pane_index}"`; tmux select-pane -D; tmux swap-pane -t $old'
bind-key -n M-K run-shell 'old=`tmux display -p "#{pane_index}"`; tmux select-pane -U; tmux swap-pane -t $old'
bind-key -n M-L run-shell 'old=`tmux display -p "#{pane_index}"`; tmux select-pane -R; tmux swap-pane -t $old'
bind-key -n M-x confirm-before "kill-pane"
bind-key -n M-/ copy-mode

bind-key E split-window -h "nvim ~/.tmux.conf"
bind-key V split-window -h "nvim ~/.config/nvim"
bind-key Z split-window -h "nvim ~/.zshrc"
bind-key A split-window -h "nvim ~/.zsh.aliases"

bind-key -n M-z send-keys 'source ~/.zshrc' Enter
bind-key -n M-p send-keys 'python main.py' Enter
bind-key -n M-N send-keys 'npm run watch' Enter
bind-key -n M-D send-keys 'from pprint import pprint as pp; import ipdb; ipdb.set_trace()'
bind-key -n M-t send-keys 'import traceback; traceback.print_stack()' Enter
bind-key -n M-a send-keys 'from main import app; app.app_context().push(); from app.models import *; from sqlalchemy import select, true, func, or_, text, cast, Date, and_, extract; from sqlalchemy.orm import joinedload, selectinload; from datetime import *' Enter
#bind-key -n M-s send-keys 'start --no-pg --no-rabbitmq' Enter


# Linux system clipboard
#bind -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xclip -in -selection clipboard"
#bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "xclip -in -selection clipboard"

# macOS system clipboard
bind -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy"

set -g mouse on
set-option -g status-keys vi
set-option -g set-titles on
set-option -g set-titles-string 'tmux - #S - #W'
set -g bell-action none
set-option -g visual-bell off
set-option -g set-clipboard off
setw -g mode-keys vi
setw -g monitor-activity off
set -g visual-activity off
set -g status-style fg=colour15
set -g status-left ''
set -g status-right '"#{=21:host}" %H:%M %d-%b-%y'
set -g status-right-style fg=colour250
set -g status-interval 10
setw -g window-status-bell-style fg=colour1
setw -g window-status-current-style fg=colour2,bold
setw -g window-status-style fg=colour250
setw -g window-status-current-format '[#{window_index}] #W  '
setw -g window-status-format '[#{window_index}] #W  '

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Other examples:
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'git@github.com/user/plugin'
# set -g @plugin 'git@bitbucket.com/user/plugin'
# set -g @plugin 'tmux-plugins/tmux-spot(cmd)ify'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run -b '~/.tmux/plugins/tpm/tpm'
